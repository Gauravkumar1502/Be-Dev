<section>
    <!-- add max-height -->
    <!-- [style]="{ height: '100%', 'max-height': '100%'}"  -->
    <p-splitter 
    class="splitter" [minSizes]="[30,30]">
        <ng-template pTemplate>
            <div class="panel" style="overflow-y: auto;">
                <app-question
                [question]="question"
                ></app-question>
            </div>
        </ng-template>
        <ng-template pTemplate>
            <p-splitter [minSizes]="[30,30]" [panelSizes]="[40,60]" 
            layout="vertical">
                <ng-template pTemplate>
                    <div class="panel">
                        <app-monaco-editor [question]="question">
                        </app-monaco-editor>
                    </div>
                </ng-template>
                <ng-template pTemplate>
                    <div class="panel input-panel">
                        <div>
                            <h4 (click)="isTestcase = true">Testcase</h4>
                            <h4 (click)="isTestcase = false">Test Result</h4>
                        </div>
                        @if (isTestcase) {
                            <textarea class="input"
                            [(ngModel)]="question.defaultInputs"
                            (input)="onDefaultInputs($event.target)">
                        </textarea>
                        }@else {
                            <div style="display: flex; flex-direction: column;">
                                @if (errorString!='') {
                                    <div>
                                        <h2 style="color: var(--red-500)">Error</h2>
                                        <div class="bark-box">
                                            <p style="color: var(--red-500)">{{ errorString }}</p>
                                        </div>
                                    </div>
                                }@else if(testCaseLength > 0){
                                    <div>
                                        <h2 [ngStyle]="{color: isAllTestCasesPassed? 'var(--green-500)' : 'var(--red-500)'}">
                                            {{ (isAllTestCasesPassed? 'Accepted' : 'Wrong Answer') }}
                                        </h2>
                                        <p>
                                            Runtime: {{ runtime }} ms, Memory: {{ memory }} KB
                                        </p>
                                    </div>
                                    <p-tabView [scrollable]="true">
                                        <p-tabPanel *ngFor="let item of testCases$ | async; let i = index" header="Case {{i + 1}}">
                                            <ng-template pTemplate="header">
                                                @if (item.isPassed) {
                                                        <i style="color: green" class="pi pi-check"></i>
                                                }@else {
                                                    <i style="color: red" class="pi pi-times"></i>
                                                }
                                                <span>Case {{i + 1}}</span>
                                            </ng-template>
                                            <div>
                                                <h4>Input:</h4>
                                                <div class="bark-box">
                                                    @for (item of item.input.split('/n'); track $index) {
                                                        <p>{{ item }}</p>
                                                    }
                                                </div>
                                                <h4>Output:</h4><div class="bark-box"> {{ item.output }}</div>
                                                <h4>Expected:</h4><div class="bark-box"> {{ item.expected }}</div>
                                              </div>
                                        </p-tabPanel>
                                    </p-tabView>
                                }
                            </div>
                        }
                    </div>
                </ng-template>
            </p-splitter>
        </ng-template>
    </p-splitter>
</section>