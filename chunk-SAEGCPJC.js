import{C as ie,D as oe,E as ne,c as H,g as Z,k as J,o as K,p as Y,q as $,s as ee,u as te}from"./chunk-GS3TBK2J.js";import"./chunk-7FUGTDEC.js";import"./chunk-7B4WEPGY.js";import{Ab as M,Bb as w,C as j,Db as u,Gb as G,Ha as _,Hb as O,Ia as c,Ib as b,J as L,Jb as S,Kb as y,Lb as Q,Ob as W,Pa as B,S as P,Ta as F,U as x,W as z,Y as q,bc as U,cb as A,ea as g,fa as R,lb as a,ma as D,mb as l,na as h,nb as m,oa as p,p as N,rb as k,sb as v,va as V,xc as X,z as T,zb as C}from"./chunk-WFDHKQOD.js";var le=["editorContainer"];var f=new q("NGX_MONACO_EDITOR_CONFIG"),se=!1,re,ue=(()=>{let o=class o{set insideNg(e){this._insideNg=e,this._editor&&(this._editor.dispose(),this.initMonaco(this._options,this.insideNg))}get insideNg(){return this._insideNg}constructor(e){this.config=e,this.onInit=new V,this._insideNg=!1}ngAfterViewInit(){se?re.then(()=>{this.initMonaco(this._options,this.insideNg)}):(se=!0,re=new Promise(e=>{let i=this.config.baseUrl||"./assets";if(typeof window.monaco=="object"){this.initMonaco(this._options,this.insideNg),e();return}let t=s=>{let E=s||window.require,I={paths:{vs:`${i}/monaco/min/vs`}};Object.assign(I,this.config.requireConfig||{}),E.config(I),E(["vs/editor/editor.main"],()=>{typeof this.config.onMonacoLoad=="function"&&this.config.onMonacoLoad(),this.initMonaco(this._options,this.insideNg),e()})};if(this.config.monacoRequire)t(this.config.monacoRequire);else if(window.require)if(window.require.config)t();else{var n=`${i}/monaco/min/vs/loader.js`,d=new XMLHttpRequest;d.addEventListener("load",()=>{let s=document.createElement("script");s.type="text/javascript",s.text=["var nodeRequire = require;",d.responseText.replace('"use strict";',""),"var monacoAmdRequire = require;","require = nodeRequire;","require.nodeRequire = require;"].join(`
`),document.body.appendChild(s),t(window.monacoAmdRequire)}),d.open("GET",n),d.send()}else{let s=document.createElement("script");s.type="text/javascript",s.src=`${i}/monaco/min/vs/loader.js`,s.addEventListener("load",()=>{t()}),document.body.appendChild(s)}}))}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0)}};o.\u0275fac=function(i){return new(i||o)(c(f))},o.\u0275cmp=g({type:o,selectors:[["ng-component"]],viewQuery:function(i,t){if(i&1&&C(le,7),i&2){let n;M(n=w())&&(t._editorContainer=n.first)}},inputs:{insideNg:"insideNg"},outputs:{onInit:"onInit"},decls:0,vars:0,template:function(i,t){},encapsulation:2});let r=o;return r})(),de=(()=>{let o=class o extends ue{set options(e){this._options=Object.assign({},this.config.defaultOptions,e),this._editor&&(this._editor.dispose(),this.initMonaco(e,this.insideNg))}get options(){return this._options}set model(e){this.options.model=e,this._editor&&(this._editor.dispose(),this.initMonaco(this.options,this.insideNg))}constructor(e,i){super(i),this.zone=e,this.editorConfig=i,this._value="",this.propagateChange=t=>{},this.onTouched=()=>{}}writeValue(e){this._value=e||"",setTimeout(()=>{this._editor&&!this.options.model&&this._editor.setValue(this._value)})}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.onTouched=e}initMonaco(e,i){let t=!!e.model;if(t){let n=monaco.editor.getModel(e.model.uri||"");n?(e.model=n,e.model.setValue(this._value)):e.model=monaco.editor.createModel(e.model.value,e.model.language,e.model.uri)}i?this._editor=monaco.editor.create(this._editorContainer.nativeElement,e):this.zone.runOutsideAngular(()=>{this._editor=monaco.editor.create(this._editorContainer.nativeElement,e)}),t||this._editor.setValue(this._value),this._editor.onDidChangeModelContent(n=>{let d=this._editor.getValue();this.zone.run(()=>{this.propagateChange(d),this._value=d})}),this._editor.onDidBlurEditorWidget(()=>{this.onTouched()}),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=T(window,"resize").subscribe(()=>this._editor.layout()),this.onInit.emit(this._editor)}};o.\u0275fac=function(i){return new(i||o)(c(B),c(f))},o.\u0275cmp=g({type:o,selectors:[["ngx-monaco-editor"]],inputs:{options:"options",model:"model"},features:[y([{provide:H,useExisting:x(()=>o),multi:!0}]),F],decls:2,vars:0,consts:[["editorContainer",""],[1,"editor-container"]],template:function(i,t){i&1&&m(0,"div",1,0)},styles:["[_nghost-%COMP%]{display:block;height:200px}.editor-container[_ngcontent-%COMP%]{width:100%;height:98%}"]});let r=o;return r})();var ae=(()=>{let o=class o{static forRoot(e={}){return{ngModule:o,providers:[{provide:f,useValue:e}]}}};o.\u0275fac=function(i){return new(i||o)},o.\u0275mod=R({type:o}),o.\u0275inj=z({imports:[X]});let r=o;return r})();var pe=["editorBody"],ge=(r,o)=>({theme:r,language:o}),xe=(()=>{let o=class o{constructor(e,i,t,n){this.themeService=e,this.cdr=i,this.questionService=t,this.dataService=n,this.languages=["c","cpp","java","python"],this.selectedLanguage="java",this.theme="vs-dark",this.code="",this.question={id:0,title:"",difficulty:"",tags:"",companies:"",description:"",constraints:"",javaBoilerplateCode:"",c11BoilerplateCode:"",cppBoilerplateCode:"",pythonBoilerplateCode:"",defaultInputs:"",javaCode:"",createdAt:"",updatedAt:"",extraInfo:"",hints:[],examples:[]},this.Ln=1,this.Col=1,this.isLoading=!1,this.result={output:"",statusCode:"",memory:"",cpuTime:"",compilationStatus:"",projectKey:""},this.TestCases=[],this.theme=this.themeService.getThemeFromLocalStorage()==="dark"?"vs-dark":"light"}ngOnChanges(){this.code=this.getBoilerplateCode(this.selectedLanguage)}changeLanguage(e){this.selectedLanguage=e.target.value,this.code=this.getBoilerplateCode(this.selectedLanguage)}onInit(e){this.editor=e,new ResizeObserver(()=>{this.editor.layout({width:this.editorBody.nativeElement.offsetWidth,height:this.editorBody.nativeElement.offsetHeight})}).observe(this.editorBody.nativeElement),this.editor.onDidChangeCursorPosition(t=>{this.Ln=t.position.lineNumber,this.Col=t.position.column,this.cdr.detectChanges()})}getBoilerplateCode(e){switch(e){case"c":return this.question.c11BoilerplateCode;case"cpp":return this.question.cppBoilerplateCode;case"java":return this.question.javaBoilerplateCode;case"python":return this.question.pythonBoilerplateCode;default:return""}}runCode(){this.isLoading=!0,this.questionService.runCode(this.selectedLanguage,this.question.javaCode+`
`+this.code,this.question.defaultInputs).pipe(P(e=>console.log(e)),j(e=>(console.error(e),N(()=>e))),L(()=>this.isLoading=!1)).subscribe(e=>{this.result=e,this.result.output.includes("error:")||this.result.cpuTime===null||this.result.memory===null?(this.dataService.updateError(this.result.output),this.dataService.updateTestCases([]),this.cdr.detectChanges()):(this.modifyTestCases(this.result),this.dataService.updateTestCases(this.TestCases),this.dataService.updateMemoryUsed(+this.result.memory),this.dataService.updateCpuTime(+this.result.cpuTime),this.dataService.updateError(""),this.cdr.detectChanges())}),this.dataService.updateIsTestcase(!1)}modifyTestCases(e){this.TestCases=[],console.log("result.output",e.output),e.output.split(`
`).forEach((i,t)=>{let n=i.split("::"),d={input:n[0],output:n[1],expected:n[2],isPassed:n[1]===n[2]};this.TestCases.push(d)})}};o.\u0275fac=function(i){return new(i||o)(c(te),c(U),c(oe),c(ne))},o.\u0275cmp=g({type:o,selectors:[["app-monaco-editor"]],viewQuery:function(i,t){if(i&1&&C(pe,5),i&2){let n;M(n=w())&&(t.editorBody=n.first)}},inputs:{question:"question"},standalone:!0,features:[y([{provide:f,useValue:{baseUrl:"/assets",defaultOptions:{minimap:{enabled:!1},scrollBeyondLastLine:!1,contextmenu:!1}}}]),D,Q],decls:24,vars:8,consts:[["editorBody",""],[1,"editor"],[1,"editor__header"],[1,"p-dropdown","language__selector",3,"ngModelChange","change","ngModel"],["value","c"],["value","cpp"],["value","java"],[1,"outer"],[1,"inner",3,"click"],[1,"pi","pi-play"],[1,"inner"],[1,"pi","pi-check"],[1,"editor__body"],[1,"my-code-editor",3,"onInit","ngModelChange","options","ngModel"],[1,"editor__footer"]],template:function(i,t){if(i&1){let n=k();a(0,"div",1)(1,"div",2)(2,"select",3),S("ngModelChange",function(s){return h(n),b(t.selectedLanguage,s)||(t.selectedLanguage=s),p(s)}),v("change",function(s){return h(n),p(t.changeLanguage(s))}),a(3,"option",4),u(4,"C"),l(),a(5,"option",5),u(6,"C++"),l(),a(7,"option",6),u(8,"Java"),l()(),a(9,"div",7)(10,"div",8),v("click",function(){return h(n),p(t.runCode())}),m(11,"i",9),a(12,"p"),u(13,"Run"),l()(),a(14,"div",10),m(15,"i",11),a(16,"p"),u(17,"Submit"),l()()()(),a(18,"div",12,0)(20,"ngx-monaco-editor",13),v("onInit",function(s){return h(n),p(t.onInit(s))}),S("ngModelChange",function(s){return h(n),b(t.code,s)||(t.code=s),p(s)}),l()(),a(21,"div",14)(22,"p"),u(23),l()()()}i&2&&(_(2),O("ngModel",t.selectedLanguage),_(18),A("options",W(5,ge,t.theme,t.selectedLanguage)),O("ngModel",t.code),_(3),G(" Ln ",t.Ln," , Col ",t.Col," "))},dependencies:[ee,Y,$,K,Z,J,ae,de,ie],styles:["[_nghost-%COMP%]{width:100%}.editor[_ngcontent-%COMP%]{background:var(--primary-color-text);height:100%;display:grid;grid-template-rows:auto 1fr auto;background-color:var(--surface)}.editor__header[_ngcontent-%COMP%]{display:flex;gap:var(--size-0-5);justify-content:space-between;padding:calc(var(--size-0-5)/2);border-bottom:1px solid var(--surface-border)}.editor__body[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(400px,1fr)}ngx-monaco-editor[_ngcontent-%COMP%]{width:100%;height:100%}.editor__footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7rem;text-align:right;margin:0;padding:calc(var(--size-0-5)/2)}.p-dropdown[_ngcontent-%COMP%]{padding:var(--size-0-5);font-size:.8rem}  .p-dropdown .p-dropdown-item{font-size:.8rem}.outer[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto;justify-content:center;gap:calc(var(--size-0-5) / 2)}.outer[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:hover{color:var(--primary-color)}.outer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:0 var(--size-1);border:1px solid var(--text-color)}.outer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{border-radius:var(--border-radius) 0 0 var(--border-radius)}.outer[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{border-radius:0 var(--border-radius) var(--border-radius) 0}.inner[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;gap:var(--size-0-5)}p[_ngcontent-%COMP%]{margin:calc(var(--size-0-5) / 2) 0}"]});let r=o;return r})();export{xe as MonacoEditorComponent};
